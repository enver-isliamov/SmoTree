
# üöú SmoTree Refactoring Roadmap

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.

## üèÅ –¶–µ–ª—å: –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π
–ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç 4 —Ä–æ–ª–µ–π –∫ 3 –ø–æ–Ω—è—Ç–Ω—ã–º —É—Ä–æ–≤–Ω—è–º –¥–æ—Å—Ç—É–ø–∞: **Admin**, **Creator**, **Guest**.

**Admin (–í–ª–∞–¥–µ–ª–µ—Ü)** - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (Google), –∫–æ—Ç–æ—Ä—ã–π –∑–∞—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–±–µ–∑ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è). –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º.
**Creator (–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–æ—Ä)** - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —é–∑–µ—Ä (Google), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫ –ø—Ä–æ–µ–∫—Ç—É —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–¥ —Å–≤–æ–∏–º —Ä–µ–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º –∏ –∏–º–µ–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Ä—Å–∏–π –∏ —Ç.–¥.), –Ω–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —á—É–∂–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
**Guest (–ì–æ—Å—Ç—å)** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª —Å—Å—ã–ª–∫—É –∏ –≤–æ—à–µ–ª –≤—Ä—É—á–Ω—É—é (–±–µ–∑ Google). –ò–º–µ–µ—Ç –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

### 1. –§—É–Ω–¥–∞–º–µ–Ω—Ç (Types & Constants)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `UserRole` enum –≤ `types.ts`.
- [x] –û–±–Ω–æ–≤–∏—Ç—å `MOCK_USERS` –≤ `constants.ts` —Å –Ω–æ–≤—ã–º–∏ —Ä–æ–ª—è–º–∏.

### 2. –î–∞—à–±–æ—Ä–¥ (Dashboard Logic)
- [x] **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤:**
    - Admin: –í–∏–¥–∏—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã.
    - Creator/Guest: –í–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç—ã, –≥–¥–µ –æ–Ω–∏ –≤ –∫–æ–º–∞–Ω–¥–µ.
- [x] **UI –≠–ª–µ–º–µ–Ω—Ç—ã:**
    - Guest: –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É "+ New Project".
    - Guest: –ó–∞–≥–æ–ª–æ–≤–æ–∫ "Shared with Me".
- [x] **–ü—Ä–∞–≤–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ:**
    - Admin: –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç.
    - Creator: –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç, –≥–¥–µ –æ–Ω `owner`.
    - Guest: –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ.

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ü—Ä–æ–µ–∫—Ç–∞ (Project View)
- [x] –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É `Upload Asset` –¥–ª—è Guest.
- [x] –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è –∞—Å—Å–µ—Ç–∞ –¥–ª—è Guest.

### 4. –ü–ª–µ–µ—Ä (Player Core)
- [x] **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
    - `canManageProject` = Admin || Creator.
- [x] **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:**
    - Guest: –ú–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏.
    - Creator/Admin: –ú–æ–≥—É—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å (—É–¥–∞–ª—è—Ç—å) –ª—é–±—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
    - Guest: –ù–µ –≤–∏–¥–∏—Ç —á–µ–∫–±–æ–∫—Å "Resolve".
    - Guest: –ù–µ –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "Resolve All".
- [x] **–í–∏–∑—É–∞–ª:**
    - [x] –ë–µ–π–¥–∂–∏–∫ "Guest" –≤–æ–∑–ª–µ –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.
- [x] **–≠–∫—Å–ø–æ—Ä—Ç:**
    - Guest: –ú–µ–Ω—é —ç–∫—Å–ø–æ—Ä—Ç–∞ (EDL/XML) —Å–∫—Ä—ã—Ç–æ.
    - Guest: –ú–µ–Ω—é –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ä—Å–∏–π —Å–∫—Ä—ã—Ç–æ.

### 5. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –†–æ—É—Ç–∏–Ω–≥ (Security)
- [x] **Guest Login:**
    - –í—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ (`?projectId=...`) -> –†—É—á–Ω–æ–π –≤–≤–æ–¥ -> –†–æ–ª—å `GUEST`.
- [x] **Creator Login:**
    - –í—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ (`?projectId=...`) -> Google Auth -> –†–æ–ª—å `CREATOR`.
- [x] **Admin Login:**
    - –í—Ö–æ–¥ –±–µ–∑ —Å—Å—ã–ª–∫–∏ -> Google Auth -> –†–æ–ª—å `ADMIN`.
- [x] **Deep Link Protection:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ.

---

## üõ† –°—Ç–∞—Ç—É—Å
**–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.** –°—Ç—Ä–æ–≥–∞—è —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.
